<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments :: head}"></head>
<body>
<header th:replace="~{fragments :: header}"></header>
<h1>Offices</h1>
<a href="/offices/new" class="button is-success is-light">
    Add new office
</a>
<table class="table is-bordered">
    <thead>
    <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Address</th>
        <th sec:authorize="hasAuthority('ADMIN')">Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="office: ${offices}">
        <td th:text="${office.id}"></td>
        <td th:text="${office.name}"></td>
        <td th:text="${office.address}"></td>
        <td sec:authorize="hasAuthority('ADMIN')">
            <div class="buttons">
                <button class="button is-info is-light">Edit</button>
                <a th:href="@{'/offices/delete/' + ${office.id}}" class="button is-danger is-light js-modal-trigger" data-target="modal-js-example">Delete</a>
            </div>
        </td>
    </tr>
    </tbody>
</table>
<footer th:replace="~{fragments :: footer}"></footer>
<div id="modal-js-example" class="modal">
    <div class="modal-background"></div>

    <div class="modal-content">
        <div class="box">
            <p>Deleting resource</p>
            <h4>Are you sure?</h4>
            <div class="buttons">
                <button class="button is-danger is-light">Delete</button>
                <button class="button is-light">Cancel</button>
            </div>
        </div>
    </div>

    <button class="modal-close is-large" aria-label="close">Close</button>
</div>
<script>
    // document.addEventListener('DOMContentLoaded', () => {
    //     // Functions to open and close a modal
    //     function openModal($el) {
    //         $el.classList.add('is-active');
    //     }
    //
    //     function closeModal($el) {
    //         $el.classList.remove('is-active');
    //     }
    //
    //     function closeAllModals() {
    //         (document.querySelectorAll('.modal') || []).forEach(($modal) => {
    //             closeModal($modal);
    //         });
    //     }
    //
    //     // Add a click event on buttons to open a specific modal
    //     (document.querySelectorAll('.js-modal-trigger') || []).forEach(($trigger) => {
    //         const modal = $trigger.dataset.target;
    //         const $target = document.getElementById(modal);
    //
    //         $trigger.addEventListener('click', () => {
    //             openModal($target);
    //         });
    //     });
    //
    //     // Add a click event on various child elements to close the parent modal
    //     (document.querySelectorAll('.modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button') || []).forEach(($close) => {
    //         const $target = $close.closest('.modal');
    //
    //         $close.addEventListener('click', () => {
    //             closeModal($target);
    //         });
    //     });
    //
    //     // Add a keyboard event to close all modals
    //     document.addEventListener('keydown', (event) => {
    //         const e = event || window.event;
    //
    //         if (e.keyCode === 27) { // Escape key
    //             closeAllModals();
    //         }
    //     });
    // });
</script>
</body>
</html>